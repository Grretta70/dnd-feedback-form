<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="D&D Campaign Feedback Form">
  <title>D&D Campaign Feedback</title>
  <style>
    :root {
      --bg-color: #1e1e2f;
      --text-color: #e0e0e0;
      --accent-color: #ffd700;
      --input-bg: #333;
      --button-text: #000;
    }
    body {
      font-family: 'Georgia', serif;
      background: var(--bg-color);
      color: var(--text-color);
      margin: 0;
      padding: 0;
      line-height: 1.6;
    }
    .container {
      max-width: 800px;
      margin: 2rem auto;
      padding: 2rem;
    }
    h1, h2 {
      color: var(--accent-color);
      margin-bottom: 1.5rem;
    }
    label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
    }
    textarea, input[type="text"] {
      width: 100%;
      padding: 0.75rem;
      margin-top: 0.25rem;
      border: 1px solid #555;
      border-radius: 5px;
      background-color: var(--input-bg);
      color: var(--text-color);
      resize: vertical;
      font-family: inherit;
    }
    textarea:focus, input:focus {
      outline: 2px solid var(--accent-color);
      outline-offset: 2px;
    }
    .checkbox-group {
      display: flex;
      gap: 1.5rem;
      margin-top: 0.75rem;
    }
    .checkbox-group label {
      display: flex;
      align-items: center;
      font-weight: normal;
    }
    .checkbox-group input {
      margin-right: 0.5rem;
      accent-color: var(--accent-color);
    }
    .section {
      display: none;
    }
    .section.active {
      display: block;
    }
    button {
      margin-top: 2rem;
      background-color: var(--accent-color);
      border: none;
      padding: 0.75rem 1.5rem;
      color: var(--button-text);
      font-weight: bold;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #e6c200;
    }
    button:focus {
      outline: 2px solid var(--accent-color);
      outline-offset: 2px;
    }
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .progress-bar {
      margin-bottom: 2rem;
      text-align: center;
      color: var(--accent-color);
      font-size: 1.1rem;
    }
    .error-message {
      color: #ff6b6b;
      font-size: 0.9rem;
      margin-top: 0.25rem;
      display: none;
    }
    .success-message {
      color: #00ff00;
      font-size: 1rem;
      margin-top: 1rem;
      display: none;
      text-align: center;
    }
    @media (max-width: 600px) {
      .container {
        padding: 1rem;
      }
      .checkbox-group {
        flex-direction: column;
        gap: 0.5rem;
      }
      button {
        padding: 0.5rem 1rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>D&D Campaign Feedback</h1>
    <div class="progress-bar" role="status" aria-live="polite">
      Section 1 of 4: Overall Experience
    </div>
    <form action="https://formspree.io/f/movdqkzp" method="POST" id="feedbackForm" novalidate>
      <div class="section active" id="section-1">
        <h2>Overall Experience</h2>
        <div>
          <label for="favorite_moment">What has been your favorite moment or encounter in the campaign so far, and why did it stand out to you?</label>
          <textarea id="favorite_moment" name="favorite_moment" rows="4" required aria-describedby="favorite_moment_error" placeholder="Describe the moment and what made it memorable..."></textarea>
          <span id="favorite_moment_error" class="error-message">Please share your favorite moment.</span>
        </div>
        <div class="checkbox-group">
          <label><input type="checkbox" name="story_engagement" value="Yes"> Does the campaign’s story consistently engage you and keep you invested in the narrative? (Check for Yes)</label>
        </div>
        <div class="checkbox-group">
          <label><input type="checkbox" name="character_in_story" value="Yes"> Do you feel your character has a meaningful role and impact within the campaign’s overarching story? (Check for Yes)</label>
        </div>
        <div>
          <label for="pacing">How would you describe the pacing of the campaign—does it feel too fast, too slow, or balanced, and how does this affect your experience?</label>
          <textarea id="pacing" name="pacing" rows="4" required aria-describedby="pacing_error" placeholder="Explain how the pacing feels and its impact..."></textarea>
          <span id="pacing_error" class="error-message">Please provide feedback on the pacing.</span>
        </div>
        <div class="checkbox-group">
          <label><input type="checkbox" name="fun" value="Yes"> Are you consistently enjoying the campaign sessions and finding them fun? (Check for Yes)</label>
        </div>
        <div class="nav-buttons">
          <span></span>
          <button type="button" aria-label="Go to next section" onclick="nextSection()">Next</button>
        </div>
      </div>
      <div class="section" id="section-2">
        <h2>Combat</h2>
        <div>
          <label for="balance">How well do you feel the balance between combat encounters and roleplay moments is handled, and does it suit your play style?</label>
          <textarea id="balance" name="balance" rows="4" required aria-describedby="balance_error" placeholder="Describe how the balance feels and if it aligns with your preferences..."></textarea>
          <span id="balance_error" class="error-message">Please provide feedback on the combat-roleplay balance.</span>
        </div>
        <div>
          <label for="fight_difficulty">How would you rate the difficulty of combat encounters—are they too easy, too challenging, or just right, and how does this impact your enjoyment?</label>
          <textarea id="fight_difficulty" name="fight_difficulty" rows="4" required aria-describedby="fight_difficulty_error" placeholder="Explain the difficulty level and its effect on your experience..."></textarea>
          <span id="fight_difficulty_error" class="error-message">Please share your thoughts on fight difficulty.</span>
        </div>
        <div>
          <label for="combat_usefulness">Do you feel your character’s abilities and skills are useful and impactful during combat encounters, and why?</label>
          <textarea id="combat_usefulness" name="combat_usefulness" rows="4" required aria-describedby="combat_usefulness_error" placeholder="Describe your character’s role in combat and how effective it feels..."></textarea>
          <span id="combat_usefulness_error" class="error-message">Please provide feedback on your combat usefulness.</span>
        </div>
        <div class="nav-buttons">
          <button type="button" aria-label="Go to previous section" onclick="prevSection()">Back</button>
          <button type="button" aria-label="Go to next section" onclick="nextSection()">Next</button>
        </div>
      </div>
      <div class="section" id="section-3">
        <h2>Roleplay & Storytelling</h2>
        <div>
          <label for="roleplay">Are there sufficient opportunities for roleplay that allow you to develop your character and engage with the world, and how do these moments impact your experience?</label>
          <textarea id="roleplay" name="roleplay" rows="4" required aria-describedby="roleplay_error" placeholder="Discuss the roleplay opportunities and their effect on your enjoyment..."></textarea>
          <span id="roleplay_error" class="error-message">Please share your thoughts on roleplay opportunities.</span>
        </div>
        <div>
          <label for="character_arc">Are you satisfied with the development and progression of your character’s arc in the campaign, and what aspects could be improved?</label>
          <textarea id="character_arc" name="character_arc" rows="4" required aria-describedby="character_arc_error" placeholder="Explain how your character’s arc is progressing and any desired changes..."></textarea>
          <span id="character_arc_error" class="error-message">Please provide feedback on your character arc.</span>
        </div>
        <div>
          <label for="npcs">Are there any NPCs that have stood out to you, either positively or negatively, and what made them memorable?</label>
          <textarea id="npcs" name="npcs" rows="4" placeholder="Mention any notable NPCs and why they stood out..."></textarea>
        </div>
        <div>
          <label for="story_cohesion">Do the campaign’s story arcs feel cohesive and well-connected, and how does this affect your immersion in the narrative?</label>
          <textarea id="story_cohesion" name="story_cohesion" rows="4" required aria-describedby="story_cohesion_error" placeholder="Describe the cohesion of the story and its impact on immersion..."></textarea>
          <span id="story_cohesion_error" class="error-message">Please share your thoughts on story cohesion.</span>
        </div>
        <div>
          <label for="story_preferences">Are there specific genres, themes, or types of challenges you’d like to see more of in the campaign, and why?</label>
          <textarea id="story_preferences" name="story_preferences" rows="4" placeholder="Suggest genres, themes, or challenges you’d enjoy..."></textarea>
        </div>
        <div class="nav-buttons">
          <button type="button" aria-label="Go to previous section" onclick="prevSection()">Back</button>
          <button type="button" aria-label="Go to next section" onclick="nextSection()">Next</button>
        </div>
      </div>
      <div class="section" id="section-4">
        <h2>Final Thoughts</h2>
        <div>
          <label for="more_of">What elements, encounters, or aspects of the campaign would you like to see more of to enhance your experience?</label>
          <textarea id="more_of" name="more_of" rows="4" placeholder="Describe what you’d like more of and why..."></textarea>
        </div>
        <div>
          <label for="change_one_thing">If you could change one aspect of the campaign to improve your enjoyment, what would it be, and how would it make a difference?</label>
          <textarea id="change_one_thing" name="change_one_thing" rows="4" placeholder="Explain the change and its potential impact..."></textarea>
        </div>
        <div>
          <label for="final_thoughts">Do you have any additional thoughts, suggestions, or feedback about the campaign that you’d like to share?</label>
          <textarea id="final_thoughts" name="final_thoughts" rows="4" placeholder="Share any other feedback or ideas..."></textarea>
        </div>
        <div class="nav-buttons">
          <button type="button" aria-label="Go to previous section" onclick="prevSection()">Back</button>
          <button type="submit" aria-label="Submit feedback form">Submit Feedback</button>
        </div>
        <div id="success-message" class="success-message">Thank you for your feedback!</div>
      </div>
    </form>
  </div>
  <script>
    console.log("Script loaded");
    let current = 0;
    const sections = document.querySelectorAll(".section");
    const progressBar = document.querySelector(".progress-bar");
    const form = document.getElementById("feedbackForm");
    const successMessage = document.getElementById("success-message");
    const sectionTitles = [
      "Overall Experience",
      "Combat",
      "Roleplay & Storytelling",
      "Final Thoughts"
    ];
    function showSection(index) {
      console.log(`Showing section ${index + 1}`);
      sections.forEach((section, i) => {
        section.classList.toggle("active", i === index);
      });
      progressBar.textContent = `Section ${index + 1} of ${sections.length}: ${sectionTitles[index]}`;
      progressBar.setAttribute("aria-label", `Currently on section ${index + 1} of ${sections.length}: ${sectionTitles[index]}`);
      window.scrollTo({ top: 0, behavior: "smooth" });
    }
    function validateSection(sectionIndex) {
      console.log(`Validating section ${sectionIndex + 1}`);
      const section = sections[sectionIndex];
      const requiredFields = section.querySelectorAll("[required]");
      let isValid = true;
      requiredFields.forEach(field => {
        const errorMessage = document.getElementById(`${field.id}_error`);
        if (!field.value.trim()) {
          errorMessage.style.display = "block";
          field.setAttribute("aria-invalid", "true");
          isValid = false;
        } else {
          errorMessage.style.display = "none";
          field.removeAttribute("aria-invalid");
        }
      });
      return isValid;
    }
    function nextSection() {
      console.log("Next button clicked");
      if (current < sections.length - 1) {
        current++;
        showSection(current);
      }
    }
    function prevSection() {
      console.log("Back button clicked");
      if (current > 0) {
        current--;
        showSection(current);
      }
    }
    form.addEventListener("submit", (e) => {
      console.log("Form submission attempted");
      if (!validateSection(current)) {
        e.preventDefault();
        console.log("Submission prevented due to validation failure");
      } else {
        successMessage.style.display = "block";
        setTimeout(() => {
          successMessage.style.display = "none";
          form.reset();
          current = 0;
          showSection(current);
        }, 3000);
      }
    });
    showSection(current);
  </script>
</body>
</html>
